app.Views=app.Views||{},function(){"use strict";app.Views.HomeView=Backbone.View.extend({homeProjectsContainer:$(".projects-container"),homeProjectClass:".project",windowWidth:$(window).width(),windowHeight:$(window).height(),intervalDragProject:null,events:{"click .enter-button":"enterProjectEvent","onkeydown document":"slideWithKeyboard"},initialize:function(){this.setProjectsSize(),this.initProjectsHome(),this.intervalDragProject=this.windowWidth/5;var a=this;$(window).on("resize",function(){a.windowResized()}),$(".enter-button").on("click",function(b){a.enterProjectEvent(b)}),$("body").bind("keyup",function(b){a.slideWithKeyboard(b,a)})},scrollTo:function(){$(".pagination ul li a").click(function(a){var b=$(this).attr("href");a.preventDefault(),$("html, body").animate({scrollTop:$(b).offset().top},2e3)})},setProjectsSize:function(){var a=this.homeProjectsContainer.find(this.homeProjectClass),b=a.length;this.homeProjectsContainer.css("width",this.windowWidth*b+"px"),a.css("width",this.windowWidth+"px"),a.css("height",this.windowHeight+"px"),$("#theWholePlanet").css({height:this.windowHeight/4.5+"px",width:this.windowHeight/4.5+"px",marginLeft:-(this.windowHeight/4.5)/2+"px",marginTop:-(this.windowHeight/4.5/2-40)+"px"}),$("#theWholeSolar").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholeFbPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholeTwPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholeLfPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholeScPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholeRssPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWholePinPlanet").css({height:this.windowHeight/1.38+"px",width:this.windowHeight/1.38+"px",marginLeft:-(this.windowHeight/1.38)/2+"px",marginTop:-(this.windowHeight/1.38/2-40)+"px"}),$("#theWhole-introduction").css({height:this.windowHeight+"px"}),$("#tdf-introduction").css({height:this.windowHeight+"px"}),$("#partech-introduction").css({height:this.windowHeight+"px"})},windowResized:function(){this.disableTransition(),this.windowWidth=$(window).width(),this.windowHeight=$(window).height(),this.intervalDragProject=this.windowWidth/5,this.setProjectsSize();var a=-this.currentProject*this.windowWidth;this.homeProjectsContainer.css({"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px, 0px)"}),this.enableTransition()},projectMapping:[],mousePositionX:null,currentProject:0,isSliderActive:!0,initProjectsHome:function(){var a=this;this.scrollTo(),this.homeProjectsContainer.find("img").on("dragstart",function(){return!1}),this.homeProjectsContainer.find("a").on("dragstart",function(){return!1}),this.homeProjectsContainer.css("width","12000px"),_.each($(this.homeProjectClass),function(b){a.projectMapping.push($(b).attr("data-project"))}),$(".noSlide").on("click",function(a){a.preventDefault()}),$(".noSlide").on("mousedown",function(b){a.disableSlider(b),$(document).on("mouseup",function(b){a.enableSlider(b),$(this).unbind("mouseup")})}),$(this.homeProjectClass).on("mousedown",function(b){return a.isSliderActive?(a.mousePositionX=b.clientX,a.homeProjectsContainer.addClass("no-transition"),$(document).on("mousemove",function(b){var c=-a.currentProject*a.windowWidth+b.clientX-a.mousePositionX;a.homeProjectsContainer.css({"-webkit-transform":"translate3d("+c+"px, 0px, 0px)","-moz-transform":"translate3d("+c+"px, 0px, 0px)","-o-transform":"translate3d("+c+"px, 0px, 0px)","-ms-transform":"translate3d("+c+"px, 0px, 0px)",transform:"translate3d("+c+"px, 0px, 0px)"})}),$(document).on("mouseup",function(b){a.homeProjectsContainer.removeClass("no-transition"),a.sliderHandler(b),$(this).unbind("mouseup"),$(this).unbind("mousemove")}),void 0):!1}),app.updateMenu(this.getActiveProjectNumber())},sliderHandler:function(a){var b=this.currentProject;return a.clientX>this.mousePositionX+200&&0!=this.currentProject?this.currentProject--:a.clientX<this.mousePositionX-200&&this.currentProject!=this.projectMapping.length-1&&this.currentProject++,this.mousePositionX=0,this.currentProject==b?(this.slideToProject(this.getActiveProjectName()),!0):(this.slideToCurrentProject(),void 0)},slideToCurrentProject:function(){this.slideToProject(this.getActiveProjectName()),app.updateMenu(this.getActiveProjectNumber()),Backbone.history.fragment=null,app.router.navigate(this.getActiveProjectName(),{trigger:!0})},slideWithKeyboard:function(a,b){var c=a.keyCode;return app.isCaseStudyActive()?!0:(37==c&&0!=this.currentProject&&b.currentProject--,39==c&&this.currentProject!=this.projectMapping.length-1&&b.currentProject++,13==c&&app.activeProjectView&&"social-coke"!=app.activeProjectView.getName()&&app.activeProjectView.enterProjectAnim(),b.slideToCurrentProject(),void 0)},enterProjectEvent:function(a){return a.preventDefault(),app.getActiveView().enterProjectAnim(),app.updateMenu(this.getActiveProjectNumber()),!1},closeProjectEvent:function(){return app.router.navigate("/"+this.getActiveProjectName(),{trigger:!0}),!1},slideToProject:function(a){this.currentProject=this.getProjectNumberByName(a),app.updateMenu(this.getActiveProjectNumber()),this.homeProjectsContainer.css({"-webkit-transform":"translate3d("+-this.currentProject*this.windowWidth+"px, 0px, 0px)","-moz-transform":"translate3d("+-this.currentProject*this.windowWidth+"px, 0px, 0px)","-o-transform":"translate3d("+-this.currentProject*this.windowWidth+"px, 0px, 0px)","-ms-transform":"translate3d("+-this.currentProject*this.windowWidth+"px, 0px, 0px)",transform:"translate3d("+-this.currentProject*this.windowWidth+"px, 0px, 0px)"})},getActiveProjectNumber:function(){return this.currentProject},getActiveProjectName:function(){return this.projectMapping[this.currentProject]},getProjectNumberByName:function(a){return _.indexOf(this.projectMapping,a)},isValidProjectName:function(a){return _.indexOf(this.projectMapping,a)>=0?!0:!1},disableSlider:function(){this.homeProjectsContainer.removeClass("dragCursor"),this.isSliderActive=!1},enableSlider:function(){this.homeProjectsContainer.addClass("dragCursor"),this.isSliderActive=!0},disableTransition:function(){this.homeProjectsContainer.addClass("no-transition")},enableTransition:function(){this.homeProjectsContainer.removeClass("no-transition")}})}();