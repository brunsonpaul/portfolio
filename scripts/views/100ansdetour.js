app.Views=app.Views||{},function(){"use strict";app.Views._100ansDeTour=Backbone.View.extend({caseStudyContainer:$(".case-study-container"),caseStudyElem:$('section[data-case-study="100ansdetour"]'),title:"100ans de Tour",name:"100ansdetour",mousePositionX:0,anchorsPositions:[],anchorsName:"tdf",initialize:function(){var b=app.homeView.windowHeight-16,c=b/6;$("#date li").css("height",c),this.initEnterProjectAction()},dragCursor:$("#tdfDragCursor"),velo:$(".enter-elem img"),initEnterProjectAction:function(){var a=this,b=Math.round(a.dragCursor.width()),c=$("#tdfDrag").width();(app.homeView.windowWidth-c)/2;var f,g;a.dragCursor.on("mousedown",function(d){g=d.clientX,f=parseInt(a.dragCursor.css("margin-left").split("px")[0]),$(document).on("mousemove",function(d){if(f=-(g-d.clientX),a.velo.addClass("no-transition"),a.dragCursor.addClass("no-transition"),f>c-b)return a.velo.removeClass("no-transition"),a.dragCursor.removeClass("no-transition"),a.velo.css("margin-left",c-b+"px"),a.dragCursor.css("margin-left",c-b+"px"),!1;if(0>f)return a.velo.removeClass("no-transition"),a.dragCursor.removeClass("no-transition"),a.velo.css("margin-left","0px"),a.dragCursor.css("margin-left","0px"),!1;a.velo.css("margin-left",f+"px"),a.dragCursor.css("margin-left",f+"px");var e=$("#tdfDragCursor").css("margin-left").replace("px","");$("#fixie-wheel1").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"}),$("#fixie-wheel2").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"}),$("#fixie-pedal").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"})}),$(document).on("mouseup",function(){if(a.velo.removeClass("no-transition"),a.dragCursor.removeClass("no-transition"),f=parseInt(a.dragCursor.css("margin-left").split("px")[0]),$(document).unbind("mouseup"),$(document).unbind("mousemove"),f>c-b-50)return app.homeView.disableSlider(),a.dragCursor.css("margin-left",c-b+"px"),a.velo.css("margin-left",c-b+"px"),$(".border").toggleClass("close open"),$("#borderTop").on("webkitTransitionEnd mozTransitionEnd msTransitionEnd oTransitionEnd transitionend",function(){$(this).unbind("webkitTransitionEnd mozTransitionEnd msTransitionEnd oTransitionEnd transitionend"),app.router.navigate("/"+a.name+"/case-study",{trigger:!1}),a.enterProjectAnim()}),!1;a.dragCursor.css("margin-left","0px"),a.velo.css("margin-left","0px");for(var e=$("#tdfDragCursor").css("margin-left").replace("px","");e>0;)$("#fixie-wheel1").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"}),$("#fixie-wheel2").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"}),$("#fixie-pedal").css({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)"}),e--})})},enterProjectAnim:function(){var a=this;$("#date").addClass("active"),$(".border").removeClass("close"),$(".border").addClass("open"),this.animateDate(a.enterProject,!0)},etapesIncrease:function(){var a=$("#nb-etapes.active"),b=$("#nb-parcours.active"),c=$("#nb-participants.active");$({someValue:0}).animate({someValue:2001},{duration:2e3,easing:"swing",step:function(){a.text(Math.round(this.someValue))}}),$({someValue:0}).animate({someValue:426068},{duration:2e3,easing:"swing",step:function(){b.text(Math.round(this.someValue))}}),$({someValue:0}).animate({someValue:13947},{duration:2e3,easing:"swing",step:function(){c.text(Math.round(this.someValue))}})},dataIncrease:function(){var a=this,b=!1;$(window).on("scroll",function(){$("#nb-etapes").hasClass("active")&&0==b&&(a.etapesIncrease(),b=!0)})},animateDate:function(a,b){var c=this,d=$("#date").find("li"),e=0,f=7,g=setInterval(function(){return e==d.length?(clearInterval(g),a&&a.call(c),!0):(b?$(d[e]).removeClass("flipOn"):$(d[e]).addClass("flipOn"),e++,!0)},f)},enterProject:function(){$(".button-menu").removeClass("open"),$(".button-menu").addClass("close"),$("body").removeClass("userSelect"),app.setCaseStudyActive(!0),$("#tdfBgContent").css("display","none"),this.caseStudyElem.css("display","block"),$(".pagination.tdf").addClass("active"),this.animateDate(function(){app.homeView.homeProjectsContainer.css("display","none"),$("#date").removeClass("active")},!1),app.initScrollAnims(),this.dataIncrease(),this.refreshAnchors(),app.refreshAnchors(),ga("send","event","Case study","Click","100ans de tour case study")},refreshAnchors:function(){this.anchorsPositions=[$("#tdf-introduction").offset().top-1,$("#tdf-context").offset().top-1,$("#tdf-data").offset().top-1,$("#tdf-design").offset().top-1,$("#tdf-thanks").offset().top-1,$("#tdf-other").offset().top-1]},leaveProject:function(){var a=this;$("#tdfBgContent").css("display","block"),app.homeView.homeProjectsContainer.css("display","block"),a.caseStudyElem.css("display","none"),$(".pagination.tdf").removeClass("active"),a.velo.css("margin-left","0px"),a.dragCursor.css("margin-left","0px"),$("body").addClass("userSelect")},enterFromRouter:function(){$(".border").removeClass("close"),$(".border").addClass("open"),app.homeView.homeProjectsContainer.css("display","none"),this.caseStudyElem.css("display","block"),this.enterProject()},disableTransition:function(a){a.removeClass("no-transition")},enableTransition:function(a){a.addClass("no-transition")},getName:function(){return this.name}})}();